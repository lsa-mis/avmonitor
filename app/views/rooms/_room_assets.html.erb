<div class="text-xs px-2">
  <% devices.all.each do |device| %>
    <% DeviceState.where(device_id: device.id).select(:key, :value, 'MAX(created_at)').group(:key).each do |state| %>
      <% if state_need_attention?(state) %>
       <div class="font-bold"><%= device.name %></div>
        <% @attention = true %>
        <div class="text-red-500 pl-2">
          <%= "#{state.key} - #{state.value}" %>
        </div>
      <% else %>
        <% if device.name != "Touch Panel" && state.key == "Online" %>
          <div class="font-bold"><%= device.name %></div>
          <div class="pl-2">
            <%= "#{state.key} - #{state.value}" %>
          </div>
        <% end %>
      <% end %>
    <% end %>
    <hr>
  <% end %>
<div>